
<div class="container">
  <div class="row">
    <div class="col-10 offset-1">
      <div class="container-profile w-100">
        <% if @club.photo.attached? %>
          <%= cl_image_tag @club.photo.key, class:"profile-img-club" %>
        <% else %>
          <%= image_tag "default-pic.png", class:"profile-img-club" %>
        <% end %>
        <div class="content-profile-club">
          <div class="sub-content">
            <h1><%= @club.name %></h1>
            <p><strong>Team Captain </strong> <%= @club.user.first_name %></p>
            <p><i class="fas fa-users"> <%= @club.members.count %></i></p>
            <span class="location">
              <i class="fa fa-map-marker" aria-hidden="true"> <%= "Stockholm" %></i>
            </span>
            <% if current_user.club != @club %>
              <div class="mt-5 mb-3">
                <%= link_to "Join request", club_club_requests_path(@club), class:"button-bb", method: :post %>
              </div>
              <% else %>
                <div class="mt-5 mb-3">
                  <%= link_to "Find an opponent", clubs_path, class:"button-bb" %>
                </div>
            <% end %>
          </div>
        </div>
        <div class="match-card-A">
          <% @club.members.each.with_index(1) do |user, index| %>
            <div>
              <span class="mr-2"><%= index %>.</span>
              <% if user %>
                <span class="<%= 'text-info' if current_user == user %>">
                <%= link_to user_profile_path(user), class: "text-light" do %>
                  <%= user.first_name.first %>.
                  <%= user.last_name%>
                <% end %>
                </span>
              <% else %>
                <span class ="empty-spot">empty</span>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="header-card-club">
  <h2>Join requests</h2>
</div>
<div class="container">
  <div class="row">
    <div class="col-10 offset-1">
      <% if current_user.club == @club %>
        <% @club.club_requests.each do |request| %>
          <% if request.status == "pending" %>
            <div class="club-request-card">
              <div class="d-flex justify-content-center">
              <%= link_to user_profile_path(request.user.id), class: "text-info" do %>
                <h5><%= request.user.first_name %> <%= request.user.last_name %></h5>
              <% end %>
              </div>
                <div class="d-flex justify-content-center">
                  <%= link_to club_request_path(request.id, choice: "accepted"),class:"button-accept badge badge-success d-flex justify-content-center align-items-center", method: :patch, data:{confirm: "Are you sure"} do %>
                    <i class="fas fa-check mt-1"></i>
                  <% end %>
                  <%= link_to club_request_path(request.id, choice: "declined"),class:"button-decline badge badge-secondary d-flex justify-content-center align-items-center", method: :patch do %>
                    <i class="fas fa-times mt-1"></i>
                  <% end %>
                </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
